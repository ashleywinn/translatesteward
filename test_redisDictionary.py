
import unittest
import mdbgCedict
import redisChineseEnglishDict

dict_file = """不露聲色 不露声色 [bu4 lu4 sheng1 se4] /not show one's feeling or intentions/
不靈 不灵 [bu4 ling2] /not work/be ineffective/
不韙 不韪 [bu4 wei3] /fault/error/
不順 不顺 [bu4 shun4] /unfavorable/adverse/
不題 不题 [bu4 ti2] /we will not elaborate on that (used as pluralis auctoris)/
不願 不愿 [bu4 yuan4] /unwilling/unwillingness/
不顧 不顾 [bu4 gu4] /in spite of/regardless of/
不顧一切 不顾一切 [bu4 gu4 yi1 qie4] /reckless/regardless of everything/
不顧前後 不顾前后 [bu4 gu4 qian2 hou4] /regardless of what's before or after (idiom); rushing blindly into sth/
不顯山不露水 不显山不露水 [bu4 xian3 shan1 bu4 lu4 shui3] /lit. to not show the mountain and to not reveal the water (idiom); fig. to hide the key facts/
不食人間煙火 不食人间烟火 [bu4 shi2 ren2 jian1 yan1 huo3] /lit. not eating the food of common mortals/fig. placing oneself above the common populace/
不飽和 不饱和 [bu4 bao3 he2] /unsaturated/
不飽和脂肪酸 不饱和脂肪酸 [bu4 bao3 he2 zhi1 fang2 suan1] /unsaturated fatty acid/
不首先使用 不首先使用 [bu4 shou3 xian1 shi3 yong4] /no first use/
不體面 不体面 [bu4 ti3 mian4] /to not appear to be decent or respectful/shameful/
不齒 不齿 [bu4 chi3] /to despise/to hold in contempt/
丏 丏 [mian3] /hidden from view/barrier to ward off arrows/
丐 丐 [gai4] /to beg for alms/beggar/
丐幫 丐帮 [gai4 bang1] /beggars' union/a group of beggars/
丑 丑 [Chou3] /surname Chou/
丑 丑 [chou3] /clown/2nd earthly branch: 1-3 a.m., 12th solar month (6th January to 3rd February), year of the Ox/
丑時 丑时 [chou3 shi2] /1-3 am (in the system of two-hour subdivisions used in former times)/
丑牛 丑牛 [chou3 niu2] /Year 2, year of the Bull or Ox (e.g. 2009)/
丒 丒 [chou3] /variant of 醜|丑[chou3]/
且 且 [qie3] /and/moreover/yet/for the time being/to be about to/both (... and...)/
且不說 且不说 [qie3 bu4 shuo1] /not to mention/leaving aside/
且休 且休 [qie3 xiu1] /rest for now/stop (usually imperative form)/
且慢 且慢 [qie3 man4] /to wait a moment/do not go too soon/
且末 且末 [Qie3 mo4] /Cherchen nahiyisi or Qiemo county in Bayin'guoleng Mongol autonomous prefecture, Xinjiang 巴音郭愣蒙古自治州[Ba1 yin1 guo1 leng4 Meng3 gu3 zi4 zhi4 zhou1], Xinjiang/
且末縣 且末县 [Qie3 mo4 xian4] /Cherchen nahiyisi or Qiemo county in Bayin'guoleng Mongol autonomous prefecture, Xinjiang 巴音郭愣蒙古自治州[Ba1 yin1 guo1 leng4 Meng3 gu3 zi4 zhi4 zhou1], Xinjiang/
且末遺址 且末遗址 [Qie3 mo4 yi2 zhi3] /ruins of Cherchen, Qarqan or Chiemo, archaeological site in Bayin'gholin Mongol autonomous prefecture 巴音郭楞蒙古自治州, Xinjiang/
且聽下回分解 且听下回分解 [qie3 ting1 xia4 hui2 fen1 jie3] /to listen to the next chapter for an explanation/
且說 且说 [qie3 shuo1] /thus/
丕 丕 [pi1] /grand/
丕變 丕变 [pi1 bian4] /radical change/
世 世 [Shi4] /surname Shi/
世 世 [shi4] /life/age/generation/era/world/lifetime/epoch/descendant/noble/
世上 世上 [shi4 shang4] /on earth/
世世 世世 [shi4 shi4] /from age to age/
世世代代 世世代代 [shi4 shi4 dai4 dai4] /ages and ages/
世事 世事 [shi4 shi4] /affairs of life/things of the world/
世交 世交 [shi4 jiao1] /(long time) friend of the family/
世人 世人 [shi4 ren2] /(common) people/
世仇 世仇 [shi4 chou2] /feud/
世代 世代 [shi4 dai4] /generation/an era/accumulation of years/passing on from generation to generation/
世代交替 世代交替 [shi4 dai4 jiao1 ti4] /alternation of generations/
世代相傳 世代相传 [shi4 dai4 xiang1 chuan2] /passed on from generation to generation (idiom); to hand down/
世伯 世伯 [shi4 bo2] /uncle (affectionate name for a friend older than one's father)/old friend/
世俗 世俗 [shi4 su2] /profane/secular/worldly/
世博 世博 [Shi4 bo2] /abbr. for 世界博覽會|世界博览会[Shi4 jie4 Bo2 lan3 hui4], World Expo/
世博會 世博会 [Shi4 bo2 hui4] /World Exposition/abbr. for 世界博覽會|世界博览会[Shi4 jie4 Bo2 lan3 hui4], World Expo/
世外桃源 世外桃源 [shi4 wai4 tao2 yuan2] /the Garden of the Peaches of Immortality/Shangri-la/imaginary land of joy and plenty (sim. Utopia, Cockaigne, Shangri-la)/
世外桃花源 世外桃花源 [shi4 wai4 tao2 hua1 yuan2] /same as 世外桃花源/the Garden of the Peaches of Immortality/imaginary land of joy and plenty (sim. Utopia, Cockaigne, Shangri-la)/
世宗 世宗 [Shi4 zong1] /Sejong the Great or Sejong Daewang (1397-1450), reigned 1418-1450 as fourth king of Joseon or Chosun dynasty, in whose reign the hangeul alphabet was invented/
世宗大王 世宗大王 [Shi4 zong1 Da4 wang2] /Sejong the Great or Sejong Daewang (1397-1450), reigned 1418-1450 as fourth king of Joseon or Chosun dynasty, in whose reign the hangeul alphabet was invented/
世家 世家 [shi4 jia1] /family influential for generations/aristocratic family/
世尊 世尊 [shi4 zun1] /World Honored One/Revered One of the World (Buddha)/
世局 世局 [shi4 ju2] /the situation (e.g. political)/the state of the world/
世態炎涼 世态炎凉 [shi4 tai4 yan2 liang2] /the hypocrisy of the world (idiom)/
世故 世故 [shi4 gu4] /the ways of the world/
世故 世故 [shi4 gu5] /sophisticated/worldly-wise/
世爵 世爵 [Shi4 jue2] /Spyker/
世界 世界 [shi4 jie4] /world/CL:個|个[ge4]/
世界人權宣言 世界人权宣言 [Shi4 jie4 Ren2 quan2 Xuan1 yan2] /Universal Declaration of Human Rights/
世界博覽會 世界博览会 [Shi4 jie4 Bo2 lan3 hui4] /World Expo/abbr. to 世博[Shi4 bo2]/
世界各地 世界各地 [shi4 jie4 ge4 di4] /all over the world/everywhere/in all parts of the world/
世界和平 世界和平 [shi4 jie4 he2 ping2] /world peace/
世界地圖 世界地图 [shi4 jie4 di4 tu2] /world map/
世界報 世界报 [Shi4 jie4 Bao4] /the name of various newspapers, notably Le Monde (France), El Mundo (Spain) and Die Welt (Germany)/
世界大戰 世界大战 [shi4 jie4 da4 zhan4] /world war/
世界小姐選美 世界小姐选美 [Shi4 jie4 Xiao3 jie5 Xuan3 mei3] /Miss World Beauty Pageant/
世界屋脊 世界屋脊 [shi4 jie4 wu1 ji3] /the roof of the world/usually refers to Tibet or Qinghai-Tibetan Plateau 青藏高原[Qing1 Zang4 gao1 yuan2]/
世界強國 世界强国 [shi4 jie4 qiang2 guo2] /world power/"""


class TestRedisDictionary(unittest.TestCase):

  def setUp(self):
    self.cedict = redisChineseEnglishDict.RedisChineseEnglishDict(host='192.168.99.100')
    for line in dict_file.split('\n'):
      entry = mdbgCedict.MdbgDictEntry.parse_entry_line(line)
      self.cedict.add_definition(simplified=entry.simplified,
                                 pinyin=entry.pinyin,
                                 definition=entry.englishdefinitions[0])

  def test_lookup_shibohui(self):
    self.assertIn('World Exposition',
                  self.cedict.definitions('世博会'))

  def test_lookup_zhuyi(self):
    self.assertIn('shi4ju2', self.cedict.pinyin('世局'))

      
if __name__ == '__main__':
    unittest.main()
